(this["webpackJsonphicetnunc-radio-component"]=this["webpackJsonphicetnunc-radio-component"]||[]).push([[0],{14:function(t,e,n){t.exports={radioView:"styles_radioView__TWlr-",walletIdEntry:"styles_walletIdEntry__3DbJd",button_getObjktData:"styles_button_getObjktData__3PaTK"}},15:function(t,e,n){t.exports={footerBar:"styles_footerBar__335pE",footerTitle:"styles_footerTitle__2EpZ1",footerText:"styles_footerText__3Quiy"}},2:function(t,e,n){t.exports={radioPlayerContainer:"styles_radioPlayerContainer__3gHdN",button:"styles_button__11O9h",controlsHolder:"styles_controlsHolder__1dbWm",button_playerControl:"styles_button_playerControl__2TTBC",button_play:"styles_button_play__3BZ6t",button_pause:"styles_button_pause__2eiIn",button_mute:"styles_button_mute__2hVIR",button_unmute:"styles_button_unmute__2dpAa",playerBar:"styles_playerBar__BMBLc",runningTime:"styles_runningTime__3bAI_",currentTrack:"styles_currentTrack__BT_jR",nextPrevControls:"styles_nextPrevControls__2JAWU",button_nextTrack:"styles_button_nextTrack__2ru0Q",button_prevTrack:"styles_button_prevTrack__hn9ZL",errorText:"styles_errorText__tMSu-",radioRange:"styles_radioRange__Lv3sV"}},34:function(t,e,n){t.exports={logo:"styles_logo__1Krvx"}},4:function(t,e,n){t.exports={trackRow:"styles_trackRow__1O3yj",trackRow_text:"styles_trackRow_text__3ikZu",trackRow_link:"styles_trackRow_link__1R894",trackRow_avatar:"styles_trackRow_avatar__1h-dM",button:"styles_button__1pWle",button_playerControl_small:"styles_button_playerControl_small__3ZnKp",button_play_small:"styles_button_play_small__1aQ6w",button_pause_small:"styles_button_pause_small__1c1jY",filterTabs:"styles_filterTabs__11id8",filterButton:"styles_filterButton__2Oq6y",selected:"styles_selected__3bU8G"}},41:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var c,a=n(1),r=n.n(a),o=n(33),s=n.n(o),l=(n(41),n(3)),i=n(10),u=n.n(i),j=n(12),b=n(8),d=n(14),_=n.n(d),f=n(17),O=n.n(f),h=function(t){return O.a.get("".concat("https://1xgf1e26jb.execute-api.us-east-1.amazonaws.com/dev","/tz?tz=").concat(t))},m=n(36),x=n(5),p=n(2),y=n.n(p),v=n(0),g=function(){return Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[Object(v.jsx)("title",{children:"Unmute"}),Object(v.jsx)("path",{fill:"currentColor",d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"})]})},k=function(){return Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:[Object(v.jsx)("title",{children:"Mute"}),Object(v.jsx)("path",{fill:"currentColor",d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"})]})},w=function(t){var e=t.isMuted,n=t.handleMute,c=t.handleUnmute;return Object(v.jsx)(v.Fragment,{children:e?Object(v.jsx)("button",{className:"".concat(y.a.button," ").concat(y.a.button_unmute," ").concat(y.a.button_playerControl),onClick:c,children:Object(v.jsx)(g,{})}):Object(v.jsx)("button",{className:"".concat(y.a.button," ").concat(y.a.button_mute," ").concat(y.a.button_playerControl),onClick:n,children:Object(v.jsx)(k,{})})})},C=function(){return Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:[Object(v.jsx)("title",{children:"Pause"}),Object(v.jsx)("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"})]})},T=function(){return Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:[Object(v.jsx)("title",{children:"Play"}),Object(v.jsx)("path",{fill:"currentColor",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})]})},L=function(t){var e=t.isPlaying,n=t.handlePlay,c=t.handlePause;return Object(v.jsx)(v.Fragment,{children:e?Object(v.jsx)("button",{className:"".concat(y.a.button," ").concat(y.a.button_play," ").concat(y.a.button_playerControl),onClick:c,children:Object(v.jsx)(C,{})}):Object(v.jsx)("button",{className:"".concat(y.a.button," ").concat(y.a.button_pause," ").concat(y.a.button_playerControl),onClick:n,children:Object(v.jsx)(T,{})})})},N=function(t){return O.a.get("".concat("https://api.tzkt.io/v1/accounts","/").concat(t,"/metadata"))},P=n(4),S=n.n(P),B=function(t,e){return t.creator in e?e[t.creator].alias:""},z=function(t){var e=t.filteredTracks,n=t.isTrackPlaying,c=t.handlePause,a=t.handleSelectTrack,r=t.creatorMetadata;return Object(v.jsx)(v.Fragment,{children:e.length?Object(v.jsx)("div",{children:e.map((function(t,e){return Object(v.jsxs)("div",{className:S.a.trackRow,children:[n(t.id)?Object(v.jsx)("button",{className:"".concat(S.a.button," ").concat(S.a.button_pause_small," ").concat(S.a.button_playerControl_small),onClick:c,children:Object(v.jsx)(C,{})}):Object(v.jsx)("button",{className:"".concat(S.a.button," ").concat(S.a.button_play_small," ").concat(S.a.button_playerControl_small),onClick:a(e),children:Object(v.jsx)(T,{})}),Object(v.jsxs)("span",{className:S.a.trackRow_text,children:[Object(v.jsxs)("a",{href:"https://hicetnunc.xyz/objkt/".concat(t.id),className:S.a.trackRow_link,children:["#",t.id," ",t.name]}),Object(v.jsx)("br",{}),"By ",Object(v.jsxs)("a",{href:"https://hicetnunc.xyz/tz/".concat(t.creator),className:S.a.trackRow_link,children:[(o=t.creator,o.slice(0,5)+"..."+o.slice(-5))," ",B(t,r)]})]}),Object(v.jsx)("img",{alt:"Artist's avatar",className:S.a.trackRow_avatar,src:"https://services.tzkt.io/v1/avatars2/".concat(t.creator)})]},t.id);var o}))}):Object(v.jsx)("p",{children:"No audio tracks available"})})},A=Object.freeze({ALL:0,CREATIONS:1,COLLECTIONS:2}),R=function(t){var e=t.filter,n=t.setFilter;return Object(v.jsxs)("div",{className:S.a.filterTabs,children:[Object(v.jsx)("button",{className:"".concat(S.a.filterButton," ").concat(e===A.ALL?S.a.selected:""),onClick:function(){return n(A.ALL)},children:"All"}),Object(v.jsx)("button",{className:"".concat(S.a.filterButton," ").concat(e===A.CREATIONS?S.a.selected:""),onClick:function(){return n(A.CREATIONS)},children:"Creations"}),Object(v.jsx)("button",{className:"".concat(S.a.filterButton," ").concat(e===A.COLLECTIONS?S.a.selected:""),onClick:function(){return n(A.COLLECTIONS)},children:"Collections"})]})},E=Object(a.createContext)({audioRef:null}),M=function(t){var e=t.children,n=new Audio,c=window.AudioContext?new window.AudioContext:new window.webkitAudioContext;console.log(c);var a=c.createMediaElementSource(n),r=c.createGain(),o=c.createAnalyser();return o.connect(c.destination),a.connect(o),a.connect(r),o.fftSize=64,Object(v.jsx)(E.Provider,{value:{audio:n,audioContext:c},children:e})},I=function(){return Object(a.useContext)(E)},F=function(t){var e=t.audioObjkts,n=t.walletId,r=I(),o=r.audio,s=r.audioContext,l=Object(a.useState)({playing:!1,currentTrackKey:0,currentId:null,isPlaying:null,isMuted:!1,volume:.5,stateUpdatedBy:null}),i=Object(b.a)(l,2),d=i[0],_=i[1],f=Object(a.useState)(0),O=Object(b.a)(f,2),h=O[0],p=O[1],g=Object(a.useState)(null),k=Object(b.a)(g,2),C=k[0],T=k[1],P=Object(a.useState)([]),S=Object(b.a)(P,2),B=S[0],E=S[1],M=Object(a.useState)(A.ALL),F=Object(b.a)(M,2),K=F[0],H=F[1],V=Object(a.useState)({}),Z=Object(b.a)(V,2),U=Z[0],W=Z[1],J=Object(a.useState)(null),q=Object(b.a)(J,2),D=q[0],G=q[1];o.onended=function(){if(B.length){var t=(Y()+1)%B.length;o.src=B[t].src,X(),_((function(e){return Object(x.a)(Object(x.a)({},e),{},{currentTrackKey:t,currentId:B[t].id})}))}},Object(a.useEffect)((function(){T(e.map((function(t){return{id:t.token_id,creator:t.token_info.creators[0],name:t.token_info.name,src:"https://cloudflare-ipfs.com/ipfs/".concat(t.token_info.artifactUri.slice(7)),mimeType:t.token_info.formats[0].mimeType}})))}),[e]),Object(a.useEffect)((function(){(null===C||void 0===C?void 0:C.length)&&o&&(o.src||(o.crossOrigin="anonymous",o.src=C[0].src,o.volume=d.volume,o.mimeType=C[0].mimeType))}),[C]),Object(a.useEffect)((function(){C&&E(C.filter((function(t){switch(K){case A.ALL:return!0;case A.CREATIONS:return t.creator===n;case A.COLLECTIONS:return t.creator!==n;default:return!0}})))}),[C,K]),Object(a.useEffect)((function(){C&&Object(j.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Set(C.map((function(t){return t.creator}))),t.next=3,Promise.allSettled(Object(m.a)(e).map((function(t){return N(t)})));case 3:n=t.sent.filter((function(t){return"fulfilled"===t.status})).reduce((function(t,e){try{t[e.value.data.logo.split(".")[0]]=e.value.data}catch(n){console.warn("Error fetching metadata:",n)}return t}),{}),W(n);case 5:case"end":return t.stop()}}),t)})))()}),[C,K]);var Q=function t(e){return function(){c=requestAnimationFrame(t(e)),p(e.currentTime)}},Y=function(){return d.currentTrackKey},X=function(){var t=Object(j.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.resume(),t.next=4,o.play();case 4:t.next=12;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("W!@\xa3$R`t"),G("Failed to play track, possibly unsupported media."),setTimeout((function(){G(null)}),4e3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),$=function(){o&&(cancelAnimationFrame(c),o.pause(),_((function(t){return Object(x.a)(Object(x.a)({},t),{},{isPlaying:!1})})))};return C?Object(v.jsxs)("div",{className:y.a.radioPlayerContainer,children:[Object(v.jsx)("div",{className:y.a.playerBar,children:Object(v.jsxs)("div",{className:y.a.controlsHolder,children:[Object(v.jsx)(L,{isPlaying:d.isPlaying,handlePlay:function(){o&&(cancelAnimationFrame(c),c=requestAnimationFrame(Q(o)),X(),_((function(t){return Object(x.a)(Object(x.a)({},t),{},{isPlaying:!0})})))},handlePause:$}),Object(v.jsx)("input",{className:y.a.radioRange,title:"volume",type:"range",value:d.volume,min:"0",max:"1",step:"0.01",onChange:function(t){if(o){var e=t.target.value;o.volume=e,_((function(t){return Object(x.a)(Object(x.a)({},t),{},{volume:e})}))}}}),Object(v.jsx)(w,{isMuted:d.isMuted,handleMute:function(){o&&(o.volume=0,_((function(t){return Object(x.a)(Object(x.a)({},t),{},{isMuted:!0})})))},handleUnmute:function(){o&&(o.volume=d.volume,_((function(t){return Object(x.a)(Object(x.a)({},t),{},{isMuted:!1})})))}}),Object(v.jsx)("div",{className:y.a.runningTime,children:function(t){var e,n,c,a=~~(t/60),r=t-60*a;return"".concat(a,".").concat((e=~~r,c=c||"0",(e+="").length>=(n=2)?e:new Array(n-e.length+1).join(c)+e))}(h)})]})}),Object(v.jsxs)("div",{className:y.a.nextPrevControls,children:[Object(v.jsx)("button",{className:y.a.button_prevTrack,onClick:function(){var t=d.currentTrackKey;if(B.length){var e=t-1;e<0&&(e=B.length-1),o.src=B[e].src,d.isPlaying&&(s.resume(),o.play()),_((function(t){return Object(x.a)(Object(x.a)({},t),{},{currentTrackKey:e,currentId:B[e].id})}))}},children:"Prev"}),Object(v.jsx)("button",{className:y.a.button_nextTrack,onClick:function(){var t=d.currentTrackKey;if(B.length){var e=(t+1)%B.length;o.src=B[e].src,d.isPlaying&&(s.resume(),o.play()),_((function(t){return Object(x.a)(Object(x.a)({},t),{},{currentTrackKey:e,currentId:B[e].id})}))}},children:"Next"}),null!==d.currentTrackKey?Object(v.jsx)("div",{className:y.a.currentTrack,children:C[d.currentTrackKey].name}):null]}),D&&Object(v.jsx)("p",{className:y.a.errorText,children:D}),Object(v.jsx)(R,{filter:K,setFilter:H}),Object(v.jsx)(z,{filteredTracks:B,isTrackPlaying:function(t){return d.isPlaying&&d.currentId===t},handlePause:$,handleSelectTrack:function(t){return function(){cancelAnimationFrame(c),c=requestAnimationFrame(Q(o)),o.src=B[t].src,X(),p(0),_((function(e){return Object(x.a)(Object(x.a)({},e),{},{currentTrackKey:t,currentId:B[t].id,isPlaying:!0})}))}},creatorMetadata:U})]}):Object(v.jsx)("p",{children:"Loading..."})},K=n(15),H=n.n(K),V=function(){return Object(v.jsxs)("div",{className:H.a.footerBar,children:[Object(v.jsx)("h2",{className:H.a.footerTitle,children:"Created as part of Hicathon Hackday 2021"}),Object(v.jsxs)("p",{className:H.a.footerText,children:["View on ",Object(v.jsx)("a",{href:"https://github.com/OrderAndCh4oS/hicetnunc-radio",children:"GitHub"})]}),Object(v.jsxs)("p",{className:H.a.footerText,children:["Working Group:",Object(v.jsx)("br",{}),Object(v.jsx)("a",{href:"https://twitter.com/lauzaki",children:"@lauzaki"}),","," ",Object(v.jsx)("a",{href:"https://twitter.com/andreasrau_eu",children:"@andreasrau_eu"}),","," ",Object(v.jsx)("a",{href:"https://twitter.com/uvdsc",children:"@uvdsc"}),","," ",Object(v.jsx)("a",{href:"https://twitter.com/__orderandchaos",children:"@__orderandchaos"}),","," ",Object(v.jsx)("a",{href:"https://twitter.com/webidente",children:"@webidente"}),","," ",Object(v.jsx)("a",{href:"https://twitter.com/BabyCommando_",children:"@BabyCommando_"}),","," ",Object(v.jsx)("a",{href:"https://twitter.com/jclayton",children:"@jclayton"})]})]})},Z=n(1).useEffect,U=function(t){Z((function(){var e=document.title;return document.title=t,function(){document.title=e}}),[t])},W=n(34),J=n.n(W),q=function(){return Object(v.jsxs)("svg",{className:J.a.logo,width:"100%",height:"100%",viewBox:"0 0 714 216",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("g",{transform:"matrix(1,0,0,1,-67.94,-316.92)",children:Object(v.jsx)("path",{d:"M359.49,532.59C354.508,532.574 349.614,531.265 345.29,528.79C336.261,523.737 330.677,514.137 330.75,503.79L330.75,345.7C330.75,345.697 330.75,345.693 330.75,345.69C330.75,329.924 343.724,316.95 359.49,316.95C364.668,316.95 369.751,318.35 374.2,321L506.74,400.06C515.421,405.237 520.754,414.628 520.754,424.735C520.754,434.842 515.421,444.233 506.74,449.41L374.2,528.48C369.758,531.152 364.674,532.572 359.49,532.59Z"})}),Object(v.jsx)("g",{transform:"matrix(1,0,0,1,-67.94,-316.92)",children:Object(v.jsx)("path",{d:"M136.64,321.33L67.94,321.33L67.94,528.18L136.64,528.18L136.64,458.76L206.72,458.76L206.72,528.18L275.42,528.18L275.42,321.33L206.72,321.33L206.72,389.33L136.64,389.33L136.64,321.33ZM561.08,321.33L768.56,321.33L768.56,528.18L699.86,528.18L699.86,389.35L629.79,389.35L629.79,528.18L561.08,528.18L561.08,321.33Z"})})]})},D=["audio/ogg","audio/mpeg","audio/wav"],G=function(){var t=Object(l.g)().tz;U("H=N Radio ".concat(t?"| ".concat(t):""));var e=Object(l.f)(),n=Object(a.useState)(null),c=Object(b.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(!0),i=Object(b.a)(s,2),d=i[0],f=i[1],O=Object(a.useState)(""),m=Object(b.a)(O,2),x=m[0],p=m[1],y=Object(a.useState)(t||"tz2R9EzXYHT93EuBkuquC6ib2cJQWJy486EL"),g=Object(b.a)(y,2),k=g[0],w=g[1];Object(a.useEffect)((function(){Object(j.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(k);case 2:n=t.sent,f(!1),o(C((null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.result)||[]));case 5:case"end":return t.stop()}}),t)})))()}),[k]);var C=function(t){return t.filter((function(t){return D.includes(t.token_info.formats[0].mimeType)}))};return r?Object(v.jsxs)("div",{className:_.a.radioView,children:[Object(v.jsx)(q,{}),Object(v.jsxs)("div",{className:_.a.walletIdEntry,children:[Object(v.jsx)("input",{value:x,placeholder:"Enter a wallet id",onChange:function(t){p(t.target.value)}}),Object(v.jsx)("button",{className:_.a.button_getObjktData,onClick:function(){w(x),p(""),f(!0),e.push("/tz/".concat(x))},disabled:!x,children:"Get Tracks"})]}),d?Object(v.jsx)("p",{children:"Loading..."}):Object(v.jsx)(F,{audioObjkts:r,walletId:k}),Object(v.jsx)(V,{})]}):Object(v.jsx)("div",{className:_.a.radioView,children:Object(v.jsx)("p",{children:"Loading..."})})};n(67);var Q=function(){return Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{exact:!0,path:"/",component:G}),Object(v.jsx)(l.a,{path:"/tz/:tz",component:G})]})},Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),r(t),o(t)}))},X=n(20);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(X.a,{children:Object(v.jsx)(M,{children:Object(v.jsx)(Q,{})})})}),document.getElementById("root")),Y()}},[[68,1,2]]]);
//# sourceMappingURL=main.30482652.chunk.js.map